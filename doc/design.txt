Draft Design for the "EnsEMBL HealthCheck" Utility


Purpose

EnsEMBL HeathCheck will provide a means to automatically run a set of checks against one or more databases.

The checks will be extensible, and able to be grouped into logically-related subgroups (suites) which can be run as required.

A report will be generated at the end of the run descibing which checks were run and what the results were.

It should be noted that this is a _checking_ tool, not a repair tool.

To minimise the amount of configuration required, the tool will gather information about which tests to run from examining the directory structure. The databases on which to run the checks will be specified by on the command line, via a simple list or a regular expression.

Defining Tests

A test is implented as a Java file that extends org.ensembl.healthcheck.EnsjTestCase. When the program is first run, all the available test cases are searched for.

Defining Test Suites

A test suite is a set of tests, or other test suites, to be run. A test suite is defined by creating a directory under the "suites" directory in the HealthCheck directory, and putting symbolic links in the test suite directory to the class file for each desired test.

Note on links

Test suites are composed of directories containing links to test case classes since this allows the test case class to change without all the test suites that use it getting out of sync. 

Example usage:

java org.ensembl.healthcheck.RunCheck "homo_sapiens_core.*"   basic integrity metadata 
                                       ^^^^^^^^^^^^^^^^^^^    ^^^^^^^^^^^^^^^^^^^^^^^^
                                       regexp describing      list of suites or simple
                                       which databases to     tests to run on these 
                                       examine                databases

This will run the tests in the directories basic, integrity and metadata, which are located under the suites directory, on any databases that match the regular expression.

For each database, each suite of tests will be run. Success or failure will be indicated for each test, each suite, and each database.

Database configuration

For ease of use, the database connection details will be stored in a standard Java properties file, as is done elsewhere in EnsJ.




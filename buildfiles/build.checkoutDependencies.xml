<?xml version="1.0"?>
<!--

Targets for checking out dependencies for the healthchecks.

Use

	ant clean

to delete the directory with the checkouts.

-->
<project name="checkoutDependencies" default="checkoutPerlDependencies" basedir="..">

	<property file="buildfiles/build.properties" />

	<!--
		Directory where checkout will be placed
	-->
	<property name="perlDependencyCheckoutDir" value="perlcode" />

        <target 
		name        = "checkoutPerlDependencies" 
		description = "" 
		depends     = "checkoutBioperlDependency, checkoutEnsemblDependency"
	/>

	<!--
		All checkouts go into this directory
	-->
        <target name="createPerlDependencyDir" description="">
		<mkdir dir="${perlDependencyCheckoutDir}" />
	</target>

	<!--
		Deletes the directory with the checkouts
	-->
        <target name="clean" description="">
		<delete dir="${perlDependencyCheckoutDir}"/>
	</target>

	<!--
		Checkouts of the Ensembl API
	-->
        <target name="checkoutEnsemblDependency" description="" depends="createPerlDependencyDir">

		<property name="ensemblRevisionOption"     value="-r branch-ensembl-61" />
		<property name="ensemblCvsRoot"            value=":pserver:cvsuser:CVSUSER@cvs.sanger.ac.uk:/cvsroot/ensembl" />

		<cvs 
			cvsRoot="${ensemblCvsRoot}" 
			command="checkout -d ${perlDependencyCheckoutDir}/ensembl ${ensemblRevisionOption} ensembl"
		/>
		<cvs 
			cvsRoot="${ensemblCvsRoot}" 
			command="checkout -d ${perlDependencyCheckoutDir}/ensembl-variation ${ensemblRevisionOption} ensembl-variation"
		/>
	</target>

	<!--
		Checkouts of Bioperl
	-->
        <target name="checkoutBioperlDependency" description="" depends="createPerlDependencyDir">

		<mkdir dir="${perlDependencyCheckoutDir}"/>

		<exec dir="." executable="wget" os="Linux">
		  <arg line="bioperl.org/DIST/old_releases/bioperl-1.2.3.tar.gz" />
		</exec>

		<exec dir="." executable="tar" os="Linux">
		  <arg line="--directory perlcode/ -xzvf bioperl-1.2.3.tar.gz" />
		</exec>

		<exec dir="." executable="mv" os="Linux">
		  <arg line="perlcode/bioperl-1.2.3/ perlcode/bioperl" />
		</exec>

	</target>

</project>

